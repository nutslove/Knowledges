## 類似度計算アルゴリズム
- RAGでは通常 **コサイン類似度** または **内積** が主流
### 1. コサイン類似度 (Cosine Similarity)
- 2つのベクトルの「角度の近さ」を測る。ベクトルの大きさには影響されず、方向の一致度を重視。
- ベクトルの大きさに依存せず、方向の類似性を測定できるため、テキストの意味的類似性の評価に適している。
- 式   
  $$
  \cos(\theta) = \frac{A \cdot B}{\|A\| \|B\|}
  $$
  - `-1`から`1`の範囲で値を取り、**1に近いほど類似度が高いことを示す。**
  - `-1`: 完全に反対方向（最も非類似）、 `0`: 直交（無関係）、 `1`: 完全に同じ方向（最も類似）
  - ここで `A` と `B` はベクトル（ユーザのクエリーをベクトル化したものと、ドキュメントをベクトル化したもの）、`A · B` は内積（ベクトルの要素ごとの積の合計）、`||A||` と `||B||` はそれぞれのベクトルの大きさ（ノルム）を表す。

### 2. ユークリッド距離 (Euclidean Distance)
- ベクトル間の直線距離を測る。
- 次元数が大きいと距離が収束して差が出にくい（高次元の呪い）。
- 式   
  $$
  d(A, B) = \sqrt{\sum_{i=1}^{n} (A_i - B_i)^2}
  $$

### 3. 内積 (ドット積, Dot Product)
- ベクトルの要素同士の積の合計で、ベクトルの大きさと方向の両方を考慮。
- 式   
  $$
  A \cdot B = \sum_{i=1}^{n} A_i B_i
  $$